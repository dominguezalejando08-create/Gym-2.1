<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MONOS FIT PRO | Elite Training</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');

        :root {
            --primary: #3b82f6;
            --primary-glow: rgba(59, 130, 246, 0.5);
            --bg: #0f172a;
            --card-bg: #1e293b;
            --text-main: #f8fafc;
            --text-dim: #94a3b8;
            --accent: #10b981;
            --danger: #f43f5e;
            --warning: #f59e0b;
            --radius: 16px;
        }

        body {
            margin: 0;
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            line-height: 1.6;
            padding-bottom: 60px;
        }

        /* --- Header & Frases --- */
        header {
            padding: 3rem 1rem;
            text-align: center;
            background: radial-gradient(circle at top, #1e40af 0%, var(--bg) 100%);
        }
        header h1 { 
            margin: 0; 
            font-size: 2.5rem; 
            font-weight: 800; 
            letter-spacing: -1px;
            text-shadow: 0 0 20px var(--primary-glow);
        }
        #frase-motivacional {
            margin-top: 10px;
            color: var(--primary);
            font-weight: 600;
            font-style: italic;
            min-height: 24px;
        }

        /* --- Navegaci√≥n Elite --- */
        nav {
            display: flex;
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            overflow-x: auto;
        }
        nav button {
            flex: 1;
            min-width: 100px;
            border: none;
            background: transparent;
            color: var(--text-dim);
            padding: 1.2rem 0.5rem;
            font-weight: 600;
            font-size: 0.8rem;
            cursor: pointer;
            transition: 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        nav button.active { color: var(--primary); border-bottom: 3px solid var(--primary); background: rgba(59, 130, 246, 0.1); }

        /* --- Layout --- */
        section { display: none; max-width: 900px; margin: 2rem auto; padding: 0 1rem; animation: fadeIn 0.4s ease; }
        section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .card {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 1.8rem;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(255,255,255,0.05);
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.3);
        }

        h2 { font-size: 1.5rem; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 10px; }

        /* --- Inputs y Botones Estilizados --- */
        .grid-inputs { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 1.5rem; }
        label { display: block; margin-bottom: 6px; font-size: 0.75rem; color: var(--text-dim); text-transform: uppercase; font-weight: 700; }
        input, select {
            background: #0f172a;
            border: 1px solid #334155;
            color: white;
            padding: 0.8rem;
            border-radius: 10px;
            width: 100%;
            box-sizing: border-box;
            outline: none;
            transition: 0.3s;
        }
        input:focus { border-color: var(--primary); box-shadow: 0 0 0 2px var(--primary-glow); }

        .btn {
            padding: 0.9rem 1.5rem;
            border-radius: 12px;
            border: none;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-transform: uppercase;
            font-size: 0.8rem;
        }
        .btn-primary { background: var(--primary); color: white; box-shadow: 0 4px 14px var(--primary-glow); }
        .btn-success { background: var(--accent); color: white; }
        .btn-danger { background: var(--danger); color: white; }
        .btn-outline { background: transparent; border: 1px solid #334155; color: white; }
        .btn:hover { transform: translateY(-2px); opacity: 0.9; }

        /* --- Tabla de Evoluci√≥n Pro --- */
        .table-container { overflow-x: auto; border-radius: 12px; background: #0f172a; }
        table { width: 100%; border-collapse: collapse; min-width: 600px; }
        th { background: #1e293b; padding: 15px; text-align: left; color: var(--primary); font-size: 0.8rem; }
        td { padding: 15px; border-bottom: 1px solid #1e293b; font-size: 0.9rem; }
        tr:hover { background: rgba(255,255,255,0.02); }

        /* --- Dieta UI --- */
        .diet-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; }
        .diet-day { padding: 12px 5px; text-align: center; border-radius: 10px; background: #0f172a; cursor: pointer; border: 1px solid #334155; font-size: 0.75rem; }
        .diet-day.active-a { background: rgba(59, 130, 246, 0.2); border-color: var(--primary); color: var(--primary); }
        .diet-day.active-b { background: rgba(245, 158, 11, 0.2); border-color: var(--warning); color: var(--warning); }

        /* --- Timer Flotante --- */
        #timer-display {
            position: fixed; bottom: 30px; right: 30px; 
            background: var(--primary); color: white; 
            padding: 15px 25px; border-radius: 50px; 
            font-weight: 800; box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            display: none; z-index: 1000; animation: bounce 0.5s infinite alternate;
        }
        @keyframes bounce { from { transform: translateY(0); } to { transform: translateY(-5px); } }

        .ex-item { display: flex; align-items: center; gap: 20px; padding: 15px; background: #0f172a; border-radius: 12px; margin-bottom: 10px; }
        .ex-img { width: 80px; height: 80px; border-radius: 10px; object-fit: cover; border: 1px solid #334155; }
    </style>
</head>
<body>

<header>
    <h1>MONOS FIT PRO</h1>
    <div id="frase-motivacional">Cargando motivaci√≥n...</div>
</header>

<nav>
    <button class="active" data-section="semana">Semana</button>
    <button data-section="rutina">Rutina</button>
    <button data-section="dieta">Dieta</button>
    <button data-section="progreso">Evoluci√≥n</button>
    <button data-section="config">Ajustes</button>
</nav>

<section id="semana" class="active">
    <h2>üìä Resumen Semanal</h2>
    <div id="resumenSemanal"></div>
    <button class="btn btn-outline" onclick="reiniciarSemana()">üîÑ Reiniciar Progreso Semanal</button>
</section>

<section id="rutina">
    <div class="card">
        <h3>‚ö° A√±adir Nuevo Ejercicio</h3>
        <div class="grid-inputs">
            <label>D√≠a <select id="diaRutina"><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option></select></label>
            <label>Ejercicio <input id="nombreEj" placeholder="Ej: Press Militar"></label>
            <label>Series <input id="series" placeholder="Ej: 4x10"></label>
            <label>Imagen <input type="file" id="imgFile" accept="image/*"></label>
        </div>
        <button class="btn btn-primary" style="width:100%" onclick="agregarEjercicio()">üíæ Guardar en Rutina</button>
    </div>
    <div id="listaRutinas"></div>
</section>

<section id="dieta">
    <div id="dietaHoyContainer"></div>
    <div class="card">
        <h3>üçè Configuraci√≥n de Men√∫s</h3>
        <div style="display:flex; gap:10px; margin-bottom:20px">
            <button class="btn btn-outline" style="flex:1" onclick="cambiarEditorDieta('A')">Men√∫ A (Volumen)</button>
            <button class="btn btn-outline" style="flex:1" onclick="cambiarEditorDieta('B')">Men√∫ B (Definici√≥n)</button>
        </div>
        <div id="editorDietaForm">
            <h4 id="editTitle" style="color:var(--primary)">Editando Men√∫ A</h4>
            <div class="grid-inputs">
                <label>üç≥ Desayuno <input id="d_desayuno"></label>
                <label>ü•™ Snack 1 <input id="d_snack1"></label>
                <label>üçΩÔ∏è Comida <input id="d_comida"></label>
                <label>üçé Snack 2 <input id="d_snack2"></label>
                <label>üåô Cena <input id="d_cena"></label>
            </div>
            <button class="btn btn-success" style="width:100%" onclick="guardarMenu()">üíæ Actualizar Plan</button>
        </div>
    </div>
    <div class="card">
        <h3>üìÖ Ciclo de 28 D√≠as</h3>
        <div class="diet-grid" id="grid28"></div>
    </div>
</section>

<section id="progreso">
    <div class="card">
        <h3>üìà Nuevo Registro Corporal</h3>
        <div class="grid-inputs">
            <label>Peso (kg) <input id="p_peso" type="number" step="0.1"></label>
            <label>Grasa (%) <input id="p_grasa" type="number" step="0.1"></label>
            <label>M√∫sculo (%) <input id="p_musculo" type="number" step="0.1"></label>
            <label>Cintura (cm) <input id="p_cintura" type="number" step="0.1"></label>
            <label>Cadera (cm) <input id="p_cadera" type="number" step="0.1"></label>
        </div>
        <button class="btn btn-success" style="width:100%" onclick="guardarProgreso()">üí™ Registrar Medidas</button>
    </div>

    <div class="card">
        <h3>üìã Historial de Progreso</h3>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>Peso</th>
                        <th>Grasa</th>
                        <th>M√∫sc.</th>
                        <th>Cint.</th>
                        <th>Cad.</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody id="tablaProgreso"></tbody>
            </table>
        </div>
    </div>
</section>

<section id="config">
    <div class="card">
        <h3>üíæ Copia de Seguridad</h3>
        <p style="font-size: 0.8rem; color: var(--text-dim);">No pierdas tu progreso. Exporta tus datos o imp√≥rtalos en otro dispositivo.</p>
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px">
            <button class="btn btn-primary" onclick="exportarDatos()">üì§ Exportar</button>
            <button class="btn btn-success" onclick="document.getElementById('fileImport').click()">üì• Importar</button>
        </div>
        <input type="file" id="fileImport" style="display:none" onchange="importarDatos(event)">
        
        <hr style="border:0; border-top:1px solid #334155; margin:2rem 0">
        
        <button class="btn btn-danger" style="width:100%" onclick="borrarTodo()">‚ö†Ô∏è Borrar todos los datos</button>
    </div>
</section>

<div id="timer-display">DESCANSO: <span id="timer-secs">60</span>s</div>

<script>
let DB = {
    rutinas: {},
    dieta: { menuA: {}, menuB: {}, plan: {} },
    progreso: []
};

// --- FRASES MOTIVACIONALES ---
const frases = [
    "No te detengas cuando canses, detente cuando termines.",
    "La disciplina es hacer lo que debes, aunque no quieras.",
    "Tu √∫nica competencia es la persona que viste al espejo ayer.",
    "El dolor es temporal, el orgullo de haberlo logrado es para siempre.",
    "Entrena como un mono, convi√©rtete en gorila.",
    "No busques excusas, busca resultados.",
    "Un entrenamiento de 1 hora es solo el 4% de tu d√≠a.",
    "La fuerza no viene de la capacidad corporal, sino de la voluntad del alma."
];

function mostrarFrase() {
    const random = Math.floor(Math.random() * frases.length);
    document.getElementById('frase-motivacional').textContent = frases[random];
}

// --- CORE ---
function saveDB() { localStorage.setItem('MONOS_FIT_ULTIMATE', JSON.stringify(DB)); }
function loadDB() {
    const data = localStorage.getItem('MONOS_FIT_ULTIMATE');
    if (data) DB = JSON.parse(data);
    else { for(let i=1; i<=28; i++) DB.dieta.plan[i] = (i%2===0) ? 'B' : 'A'; saveDB(); }
}

// --- NAVEGACI√ìN ---
document.querySelectorAll('nav button').forEach(btn => {
    btn.addEventListener('click', () => {
        document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById(btn.dataset.section).classList.add('active');
        if(btn.dataset.section === 'semana') renderSemana();
        if(btn.dataset.section === 'dieta') renderDieta();
        if(btn.dataset.section === 'progreso') renderProgreso();
        if(btn.dataset.section === 'rutina') renderListaEjercicios();
    });
});

// --- EJERCICIOS ---
function agregarEjercicio() {
    const dia = document.getElementById('diaRutina').value;
    const nombre = document.getElementById('nombreEj').value;
    const series = document.getElementById('series').value;
    const file = document.getElementById('imgFile').files[0];
    if(!nombre || !series) return alert("Completa los campos obligatorios");

    const reader = new FileReader();
    reader.onload = (e) => {
        if(!DB.rutinas[dia]) DB.rutinas[dia] = [];
        DB.rutinas[dia].push({ nombre, series, img: e.target.result || '', done: false });
        saveDB(); renderListaEjercicios();
        alert("¬°Ejercicio a√±adido con √©xito!");
        document.getElementById('nombreEj').value = '';
        document.getElementById('series').value = '';
    };
    if(file) reader.readAsDataURL(file); else reader.onload({});
}

function renderListaEjercicios() {
    const container = document.getElementById('listaRutinas');
    container.innerHTML = '';
    Object.keys(DB.rutinas).sort().forEach(dia => {
        const div = document.createElement('div');
        div.className = 'card';
        div.innerHTML = `<h3 style="color:var(--primary)">D√≠a ${dia}</h3>`;
        DB.rutinas[dia].forEach((ej, idx) => {
            div.innerHTML += `
                <div class="ex-item">
                    <img src="${ej.img || ''}" class="ex-img" onerror="this.style.display='none'">
                    <div style="flex:1">
                        <div style="font-weight:800">${ej.nombre}</div>
                        <div style="color:var(--text-dim); font-size:0.8rem">${ej.series}</div>
                    </div>
                    <input type="checkbox" style="width:25px; height:25px" ${ej.done?'checked':''} onchange="toggleEj(${dia},${idx})">
                    <button class="btn btn-danger" style="padding:8px" onclick="eliminarEj(${dia},${idx})">üóëÔ∏è</button>
                </div>`;
        });
        container.appendChild(div);
    });
}

function toggleEj(dia, idx) { 
    DB.rutinas[dia][idx].done = !DB.rutinas[dia][idx].done; 
    if(DB.rutinas[dia][idx].done) iniciarDescanso();
    saveDB(); 
}

function eliminarEj(dia, idx) { if(confirm("¬øEliminar ejercicio?")) { DB.rutinas[dia].splice(idx,1); saveDB(); renderListaEjercicios(); } }

function iniciarDescanso() {
    const display = document.getElementById('timer-display');
    const secsText = document.getElementById('timer-secs');
    let tiempo = 60; display.style.display = 'block';
    const int = setInterval(() => {
        tiempo--; secsText.textContent = tiempo;
        if(tiempo <= 0) { clearInterval(int); display.innerHTML = "üèÅ ¬°A DARLE!"; setTimeout(()=>display.style.display='none',2000); }
    }, 1000);
}

// --- DIETA ---
let editMenu = 'A';
function cambiarEditorDieta(t) {
    editMenu = t; 
    document.getElementById('editTitle').textContent = `Editando Men√∫ ${t}`;
    document.getElementById('editTitle').style.color = (t === 'A' ? 'var(--primary)' : 'var(--warning)');
    const m = DB.dieta[`menu${t}`];
    ['desayuno','snack1','comida','snack2','cena'].forEach(k => document.getElementById(`d_${k}`).value = m[k] || '');
}

function guardarMenu() {
    if(!DB.dieta[`menu${editMenu}`]) DB.dieta[`menu${editMenu}`] = {};
    const m = DB.dieta[`menu${editMenu}`];
    ['desayuno','snack1','comida','snack2','cena'].forEach(k => m[k] = document.getElementById(`d_${k}`).value);
    saveDB(); renderDieta(); alert("Plan de alimentaci√≥n actualizado");
}

function renderDieta() {
    const grid = document.getElementById('grid28'); grid.innerHTML = '';
    for(let i=1; i<=28; i++) {
        const d = document.createElement('div');
        d.className = `diet-day ${DB.dieta.plan[i]=='A'?'active-a':'active-b'}`;
        d.innerHTML = `<b>${i}</b><br>${DB.dieta.plan[i]}`;
        d.onclick = () => { DB.dieta.plan[i] = DB.dieta.plan[i]=='A'?'B':'A'; saveDB(); renderDieta(); };
        grid.appendChild(d);
    }
    const hoy = ((new Date().getDate()-1)%28)+1;
    const m = DB.dieta[`menu${DB.dieta.plan[hoy]}`];
    document.getElementById('dietaHoyContainer').innerHTML = `
        <div class="card" style="border-left:5px solid var(--primary)">
            <h3 style="margin:0 0 10px 0">üçΩÔ∏è Men√∫ para Hoy (D√≠a ${hoy})</h3>
            <div style="font-size:0.85rem; display:grid; grid-template-columns: 1fr 1fr; gap:10px">
                <div>üç≥ <b>Desayuno:</b> ${m.desayuno||'No definido'}</div>
                <div>ü•™ <b>Snack 1:</b> ${m.snack1||'No definido'}</div>
                <div>üçΩÔ∏è <b>Comida:</b> ${m.comida||'No definido'}</div>
                <div>üçé <b>Snack 2:</b> ${m.snack2||'No definido'}</div>
                <div style="grid-column: span 2">üåô <b>Cena:</b> ${m.cena||'No definido'}</div>
            </div>
        </div>`;
}

// --- EVOLUCI√ìN ---
function guardarProgreso() {
    const p = {
        fecha: new Date().toLocaleDateString('es-ES', {day:'2-digit', month:'2-digit'}),
        peso: document.getElementById('p_peso').value || '-',
        grasa: document.getElementById('p_grasa').value || '-',
        musculo: document.getElementById('p_musculo').value || '-',
        cintura: document.getElementById('p_cintura').value || '-',
        cadera: document.getElementById('p_cadera').value || '-'
    };
    DB.progreso.unshift(p);
    saveDB(); renderProgreso();
    ['p_peso','p_grasa','p_musculo','p_cintura','p_cadera'].forEach(id => document.getElementById(id).value = '');
}

function renderProgreso() {
    const t = document.getElementById('tablaProgreso'); t.innerHTML = '';
    DB.progreso.forEach((r, i) => {
        t.innerHTML += `<tr>
            <td>${r.fecha}</td><td>${r.peso}kg</td><td>${r.grasa}%</td><td>${r.musculo}%</td><td>${r.cintura}cm</td><td>${r.cadera}cm</td>
            <td><button class="btn" onclick="borrarP(${i})" style="padding:5px">‚ùå</button></td>
        </tr>`;
    });
}
function borrarP(i) { if(confirm("¬øEliminar registro?")) { DB.progreso.splice(i,1); saveDB(); renderProgreso(); } }

// --- SEMANA ---
function renderSemana() {
    const res = document.getElementById('resumenSemanal'); res.innerHTML = '';
    for(let i=1; i<=6; i++) {
        const ejs = DB.rutinas[i] || [];
        const done = ejs.filter(e => e.done).length;
        const total = ejs.length;
        const pc = total ? Math.round((done/total)*100) : 0;
        res.innerHTML += `
            <div class="card" style="padding:15px; margin-bottom:10px">
                <div style="display:flex; justify-content:space-between; margin-bottom:8px">
                    <b>D√≠a de Entrenamiento ${i}</b>
                    <span style="color:var(--primary)">${pc}%</span>
                </div>
                <div style="background:#0f172a; height:10px; border-radius:5px; overflow:hidden">
                    <div style="background:var(--primary); height:100%; width:${pc}%; transition:0.5s"></div>
                </div>
            </div>`;
    }
}

function reiniciarSemana() { if(confirm("¬øReiniciar el progreso de la semana?")) { Object.keys(DB.rutinas).forEach(d=>DB.rutinas[d].forEach(e=>e.done=false)); saveDB(); renderSemana(); } }

// --- IMPORT/EXPORT ---
function exportarDatos() {
    const blob = new Blob([JSON.stringify(DB)], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = 'monos_fit_backup.json'; a.click();
}

function importarDatos(event) {
    const file = event.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = (e) => {
        try {
            const data = JSON.parse(e.target.result);
            if(data.rutinas && data.dieta) {
                DB = data;
                saveDB();
                alert("‚úÖ Datos importados con √©xito");
                location.reload();
            } else {
                alert("‚ùå El archivo no tiene el formato correcto");
            }
        } catch(err) {
            alert("‚ùå Error al leer el archivo");
        }
    };
    reader.readAsText(file);
}

function borrarTodo() { if(confirm("¬°ALERTA! Se borrar√° todo permanentemente.")) { localStorage.clear(); location.reload(); } }

// INICIALIZACI√ìN
loadDB();
mostrarFrase();
renderSemana();
renderListaEjercicios();
</script>
</body>
</html>
